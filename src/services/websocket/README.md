# Websocket

WebSocket обеспечивает постоянное двустороннее соединение между клиентом и
сервером, что позволяет серверу отправлять уведомления сразу при возникновении
событий. Это решение хорошо подходит для приложений в реальном времени, таких
как чаты, онлайн-игры, системы мониторинга и т.д.

## Тестирование

### Замена сокета

Мы создаём новый экземпляр Subject и затем подменяем приватное свойство socket$ с помощью приведения типа (service as any).socket$ = fakeSocket$ as WebSocketSubject<any>;. Это позволяет нам эмулировать поведение реального WebSocketSubject без подключения к реальному серверу.

### Тест sendMessage

Вызываем метод sendMessage и проверяем, что у фейкового сокета вызван метод next с переданным сообщением.

### Тест getMessages

Подписываемся на поток, возвращаемый методом getMessages, и затем через fakeSocket$ эмитируем тестовое сообщение. В обработчике ожидаем, что полученное значение совпадает с тестовым.

### Тест close

Проверяем, что метод close вызывает complete() у фейкового сокета.
