<comp-advert/>

<div class="screen prep">
  <div class="prep_main">
    <h4>
      <div>Спасибо!</div>
      <div>Ваш заказ готовится</div>
    </h4>
    <div class="prep_progress">
      <svg width="400" height="400" viewBox="0 0 400 400" fill="none">
        <circle cy="200" cx="200" r="185" fill="transparent" 
          stroke="#EDECD7" stroke-width="30" transform="rotate(-90 200 200)"/>
        <circle class="progress" cy="200" cx="200" r="185" fill="transparent" 
          stroke="#F29714" stroke-width="30" 
          [attr.stroke-dasharray]="getProgressDashArray()"
          transform="rotate(-90 200 200)"/>
        <g>
          <path d="M194.765 174.797C194.538 175.988 195.13 177.184 196.214 177.726C197.297 178.267 198.608 178.023 199.425 177.128C205.592 170.378 211.915 160.75 208.658 151.961C203.733 138.667 198.896 132.767 201.061 122.752C201.203 122.099 200.878 121.433 200.275 121.144C199.673 120.854 198.949 121.015 198.527 121.533C194.444 126.552 189.195 135.45 190.73 146.823C192.478 159.765 196.357 166.436 194.765 174.797Z" fill="#F29714"/>
          <path d="M158.89 182.127C158.663 183.318 159.255 184.514 160.339 185.056C161.422 185.597 162.733 185.353 163.55 184.459C169.717 177.708 176.04 168.08 172.783 159.291C167.858 145.997 163.021 140.097 165.186 130.082C165.328 129.429 165.003 128.763 164.4 128.474C163.798 128.184 163.074 128.345 162.652 128.863C158.569 133.882 153.32 142.78 154.855 154.153C156.603 167.095 160.482 173.766 158.89 182.127Z" fill="#F29714"/>
          <path d="M230.638 179.462C230.411 180.653 231.003 181.849 232.087 182.391C233.17 182.932 234.482 182.688 235.299 181.793C241.465 175.043 247.788 165.415 244.531 156.626C239.606 143.332 234.769 137.432 236.935 127.417C237.076 126.764 236.751 126.098 236.148 125.809C235.546 125.519 234.822 125.68 234.4 126.198C230.317 131.217 225.068 140.115 226.604 151.488C228.351 164.43 232.23 171.101 230.638 179.462Z" fill="#F29714"/>
          <path d="M280.297 209.288C280.577 207.596 280.098 205.868 278.988 204.561C277.879 203.254 276.25 202.503 274.535 202.503H125.464C123.75 202.503 122.124 203.257 121.016 204.563C119.907 205.869 119.422 207.598 119.701 209.289C121.409 219.618 126.977 229.102 135.335 237.011C133.447 238.538 132.237 240.871 132.237 243.488C132.237 248.088 135.967 251.818 140.567 251.818H259.43C264.03 251.818 267.759 248.088 267.759 243.488C267.759 240.871 266.55 238.539 264.663 237.012C273.021 229.102 278.59 219.618 280.297 209.288Z" fill="#F29714"/>
          <path d="M236.039 263.118H163.96C159.574 263.118 156.019 266.673 156.019 271.059C156.019 275.446 159.574 279.001 163.96 279.001H236.039C240.425 279.001 243.981 275.446 243.981 271.059C243.981 266.673 240.425 263.118 236.039 263.118Z" fill="#F29714"/>
        </g>
      </svg>
    </div>
    <div class="prep_desc">Процесс приготовления виден через окно справа</div>
    <table>
      <tbody>
        @for (item of cartItems; track item.menuItem.id; let i = $index) {
          <tr>
            <td>
              <div class="prep_offer_pic">
                <img [src]="item.menuItem.image" [alt]="item.menuItem.title">
              </div>
            </td>
            <td>
              <div class="prep_offer_titel">{{ item.menuItem.title }}</div>
              @if (item.selectedIngredients.length > 0) {
                <div class="prep_offer_ingr">Доп. ингредиенты</div>
              }
            </td>
            <td>
              <div class="prep_offer_icon" [class._done]="completedItems[i]">
                <svg width="54" height="54" viewBox="0 0 54 54" fill="none">
                  <rect width="54" height="54" rx="27" fill="#239E3E"/>
                  <path d="M38.9128 21.1003L23.9128 36.1003C23.8258 36.1875 23.7224 36.2566 23.6086 36.3038C23.4947 36.351 23.3727 36.3753 23.2495 36.3753C23.1263 36.3753 23.0043 36.351 22.8905 36.3038C22.7767 36.2566 22.6733 36.1875 22.5863 36.1003L16.0238 29.5378C15.8479 29.3619 15.749 29.1233 15.749 28.8745C15.749 28.6258 15.8479 28.3872 16.0238 28.2113C16.1997 28.0353 16.4383 27.9365 16.687 27.9365C16.9358 27.9365 17.1744 28.0353 17.3503 28.2113L23.2495 34.1117L37.5863 19.7738C37.7622 19.5978 38.0008 19.499 38.2495 19.499C38.4983 19.499 38.7369 19.5978 38.9128 19.7738C39.0887 19.9497 39.1876 20.1883 39.1876 20.437C39.1876 20.6858 39.0887 20.9244 38.9128 21.1003Z" fill="white"/>
                </svg>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  <div class="prep_foot">
    <a [routerLink]="['/' + urls.WELCOME]" class="btn yellow empty">
      <div class="_icon">
        <img src="/assets/media/arrow-left.svg" width="23" height="20" alt="Назад">
      </div>
      <div class="_text">Выход</div>
    </a>
  </div>
</div>
